// Generated by CoffeeScript 1.7.1
var locker;

locker = require('../lib/locker');

module.exports = function(err, req, res, next) {
  var message, statusCode;
  statusCode = err.status || 500;
  message = err instanceof Error ? err.message : err.error;
  res.send(statusCode, {
    error: message
  });
  if (req.lock != null) {
    return locker.removeLock(req.lock);
  }
};
