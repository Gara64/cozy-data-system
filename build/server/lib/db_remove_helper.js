// Generated by CoffeeScript 1.7.1
var db, getDeletedDoc;

db = require('../helpers/db_connect_helper').db_connect();

getDeletedDoc = function(doc) {
  var deletedDoc;
  deletedDoc = {
    "_id": doc._id,
    "_rev": doc._rev,
    "_deleted": true
  };
  if (doc.docType != null) {
    deletedDoc.docType = doc.docType;
  }
  if (doc.binary != null) {
    deletedDoc.binary = doc.binary;
  }
  return deletedDoc;
};

exports.remove = (function(_this) {
  return function(doc, callback) {
    var deletedDoc;
    deletedDoc = getDeletedDoc(doc);
    return db.save(doc._id, deletedDoc, callback);
  };
})(this);

exports.removeAll = (function(_this) {
  return function(docs, callback) {
    var deletedDocs, doc, _i, _len;
    deletedDocs = [];
    for (_i = 0, _len = docs.length; _i < _len; _i++) {
      doc = docs[_i];
      deletedDocs.push(getDeletedDoc(doc.value));
    }
    return db.save(deletedDocs, callback);
  };
})(this);
